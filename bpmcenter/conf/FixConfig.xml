<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<fixConfig>
	<bpaConf>
		<analysisEngine id="flowProcessAnalysis">
			<dataFeeds id="flowProcessAnalysis">
				<!-- 抽取时间维度 
				<dataFeed id="dimDateDataFeed" engine="dimDateDataFeed">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
				</dataFeed>
				
				
				<dataFeed id="processDef" engine="processDefDataFeed">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
				</dataFeed>
				 
				<dataFeed id="processInstance" engine="processInstanceDataFeed">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
				</dataFeed>
				<dataFeed id="taskInstance" engine="taskInstanceDataFeed">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
				</dataFeed>-->
				<dataFeed id="dimOrg" engine="dimOrgDataFeed">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
					<!-- 已经有层次的组织结构，人员信息具有从最顶层组织到它直属组织的信息都已经存在 -->
					<!-- 例子: select a as USERID,b as USERNAME, c as GROUPID , d as GROUPNAME, e as PARENTGROUPID, f as GROUPTYPE, g as ISPROPERTY from xxxx  -->
					<!-- ISPROPERTY 标识当前用户和组织是否是直属的关系，1表示直属，0表示非直属 -->
					<item>
						<key>hasLevelGroup</key>
						<value></value>
					</item>
					<!-- 只存在人员信息和它直属组织的关系，并且组织之间具有父子关系 -->
					<!-- 组织之间的父子关系 -->
					<item>
						<key>department</key>
						<value>select ID as GROUPID, NAME as GROUPNAME, FATHERID as PARENTGROUPID,GROUPTYPE as GROUPTYPE from APP_GROUP</value>
					</item>
					<!-- 人员信息和组织的直属关系 -->
					<item>
						<key>noLevelGroup</key>
						<value>select APP_USER.ID as USERID,APP_USER.NAME as USERNAME, APP_GROUP.ID as GROUPID,APP_GROUP.NAME as GROUPNAME
,APP_GROUP.FATHERID as PARENTGROUPID,APP_GROUP.GROUPTYPE as GROUPTYPE
from APP_USER left join APP_GROUPUSER on APP_USER.ID = APP_GROUPUSER.USERID left join APP_GROUP
on APP_GROUP.ID = APP_GROUPUSER.GROUPID</value>
					</item>
				</dataFeed>
			</dataFeeds>
			<dataPushers id="flowProcessAnalysis" engine="flowProcessAnalysisImpl">
				<dataPusher id="flowProcessAnalysis" engine="flowProcessAnalysisImpl">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
				</dataPusher>
				<dataPusher id="flowProcessAnalysis" engine="flowProcessAnalysisImpl">
					<tigger value="234"/>
					<workspace>
						<source key="bpmDB" value="DB_BPA_BASE"/>
					</workspace>
					<outPutDB value="DB_BPA_BASE2"/>
					<mdx id="123" parentId="312" target="54">
						<columns>
							<column id="54" name="45"/>
							<column id="45" name="45"/>
						</columns>
						<content>
							23fsdfasdfasdfsadfadsfasdf
						</content>
					</mdx>
					<mdx id="12333" parentId="312" target="54">
						<columns>
							<column id="54" name="45"/>
							<column id="45" name="45"/>
						</columns>
						<content>
							23fsdfasdfasdfsadfadsfasdf
						</content>
					</mdx>
					<mdx id="1233333" parentId="12333" target="54">
						<columns>
							<column id="54" name="45"/>
							<column id="45" name="45"/>
						</columns>
						<content>
							23fsdfasdfasdfsadfadsfasdf
						</content>
					</mdx>
					<mdx id="312" parentId="" target="54">
						<columns>
							<column id="54" name="45"/>
							<column id="45" name="45"/>
						</columns>
						<content>
							23fsdfasdfasdfsadfadsfasdf
						</content>
					</mdx>
					<mdx id="3123" parentId="" target="54">
						<columns>
							<column id="54" name="45"/>
							<column id="45" name="45"/>
						</columns>
						<content>
							23fsdfasdfasdfsadfadsfasdf
						</content>
					</mdx>
				</dataPusher>
			</dataPushers>
		</analysisEngine>
	</bpaConf>
		<item>
		    <!-- 从流程实例中抽取数据 -->
		    <key>FIXFLOW_RUN_PROCESSINSTANCE</key>
		    <value>
		        SELECT FRP.*,FDP.PROCESS_NAME,FDP.VERSION  FROM FIXFLOW_RUN_PROCESSINSTANCE FRP LEFT JOIN FIXFLOW_DEF_PROCESSDEFINITION FDP ON FDP.PROCESS_ID = FRP.PROCESSDEFINITION_ID
		    </value>
		</item>
		<item>
		    <!-- 从任务实例中抽取数据 -->
		    <key>FIXFLOW_RUN_TASKINSTANCE</key>
		    <value>
		        SELECT * FROM FIXFLOW_RUN_TAKSINSTANECE WHERE ASSIGNEE IS NOT NULL
		    </value>
		</item>
</fixConfig>